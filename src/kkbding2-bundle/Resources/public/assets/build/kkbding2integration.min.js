function dateDecorator(e){return"Dato: "+e}function headlineChange(e){function t(e){options.infoheader=e}options=e.slide.options,date=options.date,date.text?t(date.text):date.from&&date.to?t(dateDecorator(date.from+" - "+date.to)):date.from?t(dateDecorator(date.from)):t("")}angular.module("toolsModule").directive("backgroundEditorStaticColors",["mediaFactory",function(i){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(r){r.step="background-picker",r.backgroundPicker=function(){r.step="background-picker"},r.pickFromMedia=function(){r.step="pick-from-media"},r.pickFromComputer=function(){r.step="pick-from-computer"},r.clickBackgroundColor=function(){r.slide.options.images=[]};r.$on("mediaOverview.selectMedia",function(e,t){!function(e){for(var t=[],i=!1,o=0;o<r.slide.media.length;o++){r.slide.media[o].id===e.id&&(i=!0)}i||t.push(e),r.slide.media=t}(t)}),r.$on("mediaUpload.uploadSuccess",function(e,t){i.getMedia(t.id).then(function(e){r.slide.media=[e]},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})}),t.queue.find(function(e,t){return!e.isSuccess})||r.close()})},templateUrl:function(e,t){return t.template?t.template:"/bundles/kkbding2integration/apps/dingEditors/background-editor-static-colors.html"}}}]),angular.module("toolsModule").directive("dateTimePlace",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/date-time-place.html"}}),angular.module("toolsModule").directive("dingEventsEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/ding-events-editor.html"}}),angular.module("datetimePicker").directive("datePicker",function(){return{restrict:"A",require:"^ngModel",link:function(e,t){t.datetimepicker({timepicker:!1,format:"d.m.Y"})}}}),angular.module("toolsModule").directive("eventDatePicker",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(e){e.onDateChange=function(){headlineChange(e)}},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/event-date-picker.html"}}),angular.module("toolsModule").directive("eventPlaceEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/event-place-editor.html"}}),angular.module("datetimePicker").directive("timePicker",function(){return{restrict:"A",require:"^ngModel",link:function(e,t){t.datetimepicker({datepicker:!1,format:"H.i",step:15})}}}),angular.module("toolsModule").directive("eventTimePicker",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/event-time-picker.html"}}),angular.module("toolsModule").directive("headerEditorSimple",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/header-editor-simple.html"}}),angular.module("toolsModule").directive("headerEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/header-editor.html"}}),angular.module("toolsModule").directive("imageFocus",["mediaFactory",function(e){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(e){e.zoomMin=100,e.zoomMax=500},templateUrl:function(e,t){return t.template?t.template:"/bundles/kkbding2integration/apps/dingEditors/image-focus.html"}}}]),angular.module("toolsModule").directive("imagePicker",["mediaFactory",function(i){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(r){r.zoomMin=100,r.zoomMax=500,r.step="background-picker",r.backgroundPicker=function(){r.step="background-picker"},r.pickFromMedia=function(){r.step="pick-from-media"},r.pickFromComputer=function(){r.step="pick-from-computer"};r.$on("mediaOverview.selectMedia",function(e,t){!function(e){for(var t=[],i=!1,o=0;o<r.slide.media.length;o++){r.slide.media[o].id===e.id&&(i=!0)}i||t.push(e),r.slide.media=t}(t)}),r.$on("mediaUpload.uploadSuccess",function(e,t){i.getMedia(t.id).then(function(e){r.slide.media=[e]},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})})})},templateUrl:function(e,t){return t.template?t.template:"/bundles/kkbding2integration/apps/dingEditors/image-picker.html"}}}]),angular.module("toolsModule").directive("infoEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/info-editor.html"}}),angular.module("toolsModule").directive("logoPicker",["mediaFactory",function(o){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(i){i.logoStep="logo-picker",i.logoPicker=function(){i.logoStep="logo-picker"},i.pickLogoFromMedia=function(){i.logoStep="pick-logo-from-media",i.$emit("mediaOverview.updateSearch")},i.pickLogoFromComputer=function(){i.logoStep="pick-logo-from-computer"},i.$on("mediaOverview.selectMedia",function(e,t){"logo"===t.media_type&&(i.slide.logo=t,i.logoStep="logo-picker")}),i.$on("mediaUpload.uploadSuccess",function(e,t){o.getMedia(t.id).then(function(e){"logo"===e.media_type&&(i.slide.logo=e,i.logoStep="logo-picker")},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})})})},templateUrl:function(e,t){return t.template?t.template:"/bundles/kkbding2integration/apps/dingEditors/logo-picker.html"}}}]),angular.module("toolsModule").directive("openingHoursEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/opening-hours-editor.html"}}),angular.module("toolsModule").directive("referenceEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/reference-editor.html"}}),angular.module("toolsModule").directive("textColorEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},templateUrl:"/bundles/kkbding2integration/apps/dingEditors/text-color-editor.html"}});